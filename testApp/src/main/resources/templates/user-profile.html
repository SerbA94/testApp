<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
    <head>
        <title>User profile</title>
    </head>
    <body>
    	<h1>User profile</h1>
    	<a href="/">main page</a>
    	<a href="/logout" sec:authorize="isAuthenticated()">logout</a>
    	<div>
   			Logged in as : <b>[[${#httpServletRequest.remoteUser}]]</b> <br>
   		</div>  
    
    	<form th:action="@{/update-profile}" th:object="${user}" method="post">
			<div>
				<label for="firstName">First Name</label>
				<input type="text" th:field="*{firstName}" placeholder="First Name"> 
			</div>
			<div>
				<label for="lastName">Last Name</label>
				<input type="text" th:field="*{lastName}" placeholder="Last Name"> 
			</div>
			<div>
				Country : <b>[[${user.country[0]}]]</b>
			</div>
			<div th:if="${user.isCountryCanada(user.country[0])}">
				<div>
					<label for="province">Province</label>
					<input type="text" th:field="*{province}" placeholder="Province"> 
				</div>
				<div>
					<label for="nativeCity">City</label>
					<input type="text" th:field="*{nativeCity}" placeholder="City"> 
				</div>
			</div>
			<div th:if="${user.isCountryUSA(user.country[0])}">
				<div>
					<b>Select your state</b><br>
					<select th:field="*{state}">
  						<option value="ALABAMA">ALABAMA</option>
						<option value="ALASKA">ALASKA</option>
						<option value="ARIZONA">ARIZONA</option>
						<option value="ARKANSAS">ARKANSAS</option>
						<option value="CALIFORNIA">CALIFORNIA</option>
						<option value="COLORADO">COLORADO</option>
						<option value="CONNECTICUT">CONNECTICUT</option>
						<option value="DELAWARE">DELAWARE</option>
						<option value="FLORIDA">FLORIDA</option>
						<option value="GEORGIA">GEORGIA</option>
						<option value="HAWAII">HAWAII</option>
						<option value="IDAHO">IDAHO</option>
						<option value="ILLINOISINDIANA">ILLINOISINDIANA</option>
						<option value="IOWA">IOWA</option>
						<option value="KANSAS">KANSAS</option>
						<option value="KENTUCKY">KENTUCKY</option>
						<option value="LOUISIANA">LOUISIANA</option>
						<option value="MAINE">MAINE</option>
						<option value="MARYLAND">MARYLAND</option>
						<option value="MASSACHUSETTS">MASSACHUSETTS</option>
						<option value="MICHIGAN">MICHIGAN</option>
						<option value="MINNESOTA">MINNESOTA</option>
						<option value="MISSISSIPPI">MISSISSIPPI</option>
						<option value="MISSOURI">MISSOURI</option>
						<option value="MONTANANEBRASKA">MONTANANEBRASKA</option>
						<option value="NEVADA">NEVADA</option>
						<option value="NEW_HAMPSHIRE">NEW HAMPSHIRE</option>
						<option value="NEW_JERSEY">NEW JERSEY</option>
						<option value="NEW_MEXICO">NEW MEXICO</option>
						<option value="NEW_YORK">NEW YORK</option>
						<option value="NORTH_CAROLINA">NORTH CAROLINA</option>
						<option value="NORTH_DAKOTA">NORTH_DAKOTA</option>
						<option value="OHIO">OHIO</option>
						<option value="OKLAHOMA">OKLAHOMA</option>
						<option value="OREGON">OREGON</option>
						<option value="PENNSYLVANIARHODE_ISLAND">PENNSYLVANIARHODE ISLAND</option>
						<option value="SOUTH_CAROLINA">SOUTH CAROLINA</option>
						<option value="SOUTH_DAKOTA">SOUTH DAKOTA</option>
						<option value="TENNESSEE">TENNESSEE</option>
						<option value="TEXAS">TEXAS</option>
						<option value="UTAH">UTAH</option>
						<option value="VERMONT">VERMONT</option>
						<option value="VIRGINIA">VIRGINIA</option>
						<option value="WASHINGTON">WASHINGTON</option>
						<option value="WEST_VIRGINIA">WEST VIRGINIA</option>
						<option value="WISCONSIN">WISCONSIN</option>
						<option value="WYOMING">WYOMING</option>
					</select>
				</div>	
			</div>
	
			<input type="hidden" th:field="*{country}" value="user.country"> 
			<input type="hidden" th:field="*{password}" value="user.password"> 
			<input type="hidden" th:field="*{username}" value="user.username">
			<input type="hidden" th:field="*{id}" value="user.id">
			
			<div>
				<button type="submit">Update my info</button>
			</div>
		</form> <br>
		
		<div>
			<a href="/delete" sec:authorize="isAuthenticated()">delete my profile</a>
		</div>
		
    </body>
</html>